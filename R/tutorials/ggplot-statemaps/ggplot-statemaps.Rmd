---
title: ""
html_document:
  toc: true
---

```{r setup, echo=FALSE, warning=FALSE,cache=FALSE}
source('../../source/common_rmd_options.R')
```

# Basic Syntax

```{r}
# Load Census Data
census_data_url <- 'http://www.bertplot.com/visualization/wp-content/uploads/2015/08/ACS_13_1YR_DP02_with_ann.csv'
census_data <- read.csv(census_data_url)
census_data$region = tolower(census_data$GEO.display.label)
census_data %>% rename(born_in_us=HC03_VC132)
 
library(ggplot2)
# Load US State Coordinates
state_coords <- map_data("state")

# Join Census data with map data
state_data <- left_join(state_coords,
                       census_data,
                       by='region')

# Basic plot
map <- 
  ggplot(state_data) +
  geom_polygon(aes(x = long, y = lat,
                   group = group,
                   fill = born_in_us))
map
```

<a href="#top">Back to top</a>

# Change Coordinate Projection
Requires installation of <b>{mapproj}</b> package
```{r}
map+coord_map(project='conic',lat0=30)
```

<a href="#top">Back to top</a>

# Aesthetics

```{r}
library(scales)
library(grid)
map_theme <- 
  theme(axis.ticks=element_blank(),
        axis.text.x=element_blank(),
        axis.text.y=element_blank(),
        axis.title.x=element_blank(),
        axis.title.y=element_blank(),
        legend.title=element_text(size=16),
        legend.text=element_text(size=12),
        legend.key.size=(unit(x=0.5,units='cm')),
        panel.background=element_rect(fill='white'))
map <- 
  ggplot(state_data) +
  geom_polygon(aes(x = long, y = lat,
                   group = group,
                   fill = born_in_us),
               color='black',
               size=0.8) +
  coord_map(project='conic',lat0=30)+
  scale_fill_gradient('% Born in US')+
  map_theme
map  

```

# More Resources
- [Source as RMarkdown]((https://github.com/rweyant/bertplot/blob/master/R/tutorials/ggplot-boxplot/ggplot-boxplot.Rmd))
- [docs.ggplot2.org](http://docs.ggplot2.org/0.9.3/geom_boxplot.html)
- [ggplot2 themes](http://docs.ggplot2.org/dev/vignettes/themes.html)
